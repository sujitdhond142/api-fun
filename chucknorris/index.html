<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/main.css">

    <title>API-FUN | ChuckNorris</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">HOME</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
                <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                    <li class="nav-item">
                        <!-- <a class="nav-link" href="#">Link</a> -->
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container">
        <div class="jumbotron-fluid text-center pt-4">
            <h1 class="display-4 mt-4 mb-5">Chuck Norris Facts</h1>
            <div class="col-lg-8 m-auto">
                <div class="card">
                    <div class="card-body">
                        <p class="lead font-italic" id="chuckNorrisFact">"Lorem ipsum dolor sit amet consectetur adipisicing elit. Placeat incidunt aperiam soluta inventore, voluptas quisquam perspiciatis molestiae autem dignissimos quod."</p>
                        <div class="">
                            <!-- <button class="btn btn-light clipboard" onclick="copyToClipboard('#chuckNorrisFact')">Copy</button> -->
                            <!-- <button class="btn btn-primary " onclick="copyToClipboard('#chuckNorrisFact')">Copy Fact</button> -->
                        </div>
                    </div>
                    <div class="card-footer bg-white ">
                        <button class="btn btn-primary" title="Copy To Clipboard" data-toggle="tooltip" onclick="copyToClipboard('#chuckNorrisFact');changeTitle(this,'Copied','Copy To Clipboard')">Copy Fact</button>
                    </div>
                </div>
            </div>
            <!-- <p class="lead font-italic" id="chuckNorrisFact">"Lorem ipsum dolor sit amet consectetur adipisicing elit. Placeat incidunt aperiam soluta inventore, voluptas quisquam perspiciatis molestiae autem dignissimos quod."</p> -->
        </div>
        <div class="row col-lg-6 m-auto">
            <div class="col-sm-6 mt-4">
                <select class="form-control " id="chuckNorrisCategories">
                    <option value="null">Category</option>
                </select>
            </div>
            <div class="col-sm-6 mt-4 mb-4">
                <button class="btn btn-primary col" id="submit_button" onclick="fetchFact()">
                    <div class="spinner">
                        <div class="bounce1"></div>
                        <div class="bounce2"></div>
                        <div class="bounce3"></div>
                    </div>
                    <div class="btntext">
                        Another Random Fact !
                    </div>
                </button>
            </div>
        </div>

    </div><!-- end of container -->


</body>
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->

<!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script> -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/popper.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script>
    // console.log("test 101");
    $(document).ready(function(){
        //run following functions after document load
        // fetchCategories();
        // fetchFact();
        // $("#submit_button").click(fetchFact());

        $('[data-toggle="tooltip"]').tooltip()
    });
    function fetchCategories(){
        $.get({
            url: "https://api.chucknorris.io/jokes/categories"
        }).done(function(data){
            console.log(data);
            for(i=0;i<data.length;i++){
                var optionNode = document.createElement('option');
                optionNode.text = data[i];
                optionNode.value = data[i];
                $("#chuckNorrisCategories").append(optionNode);
            }
        }).fail(function(){
            alert("Error occurred")
        });
    }
    function fetchFact(){
        $("#submit_button").attr("disabled",true);
        $("#submit_button .spinner").show();
        $("#submit_button .btntext").hide();
        var category = $('#chuckNorrisCategories').val();
        if(category == "null"){
            requestURL = "https://api.chucknorris.io/jokes/random";
        }else{
            requestURL = "https://api.chucknorris.io/jokes/random?category="+category;
        }

        $.get({
            url: requestURL
        }).done(function(data){
            $("#submit_button").attr("disabled",false);
            $("#submit_button .spinner").hide();
            $("#submit_button .btntext").show();
            console.log(data);
            $("#chuckNorrisFact").text(data.value);
        }).fail(function(){
            alert("Error occurred")
        });
    }
    function copyToClipboard(element){
        var $temp = $("<input>");
        $("body").append($temp);
        $temp.val($(element).text()).select();
        document.execCommand("copy");
        $temp.remove();
    }
    function changeTitle(element,newTitle,oldTitle){
        $(element).attr('data-original-title',newTitle)
                  .tooltip('show')
                  .attr('data-original-title',oldTitle);
    }
</script>

</html>